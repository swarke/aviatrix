<div class="container-fluid" style="margin-top: 60px;">
    <div class="row mrg-top-15">
        <div class="col-md-7 pad-right-none">
            <div class="card card-radious-none">
                <div class="card-header">   
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="card-title card-title-margin">{{leftPanelHeader}}</h6>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-stop" (click)="stopTest();" [disabled]="!disabledStart"> <i class="fa fa-stop" aria-hidden="true"></i>&nbsp;&nbsp;{{properties.STOP}}</button>
                            <button class="btn btn-start" (click)="startTest();" [disabled]="disabledStart"><i class="fa fa-play" aria-hidden="true"></i>&nbsp;&nbsp;{{properties.START}}</button>
                        </div>
                    </div>
                </div>
                <div class="card-block"  style="padding: 0px;"> 
                <!-- *ngIf="userLocation.latitude && locations.length > 0" -->
                    <div id="map" style="height: 300px;"></div>
                <!-- *ngIf="userLocation.latitude && locations.length > 0" -->
                    <!-- Google map implementation -->
                    <!-- <agm-map [latitude]="0" [longitude]="768"
                    [scrollwheel]="false" [zoom]="1" [streetViewControl]="false"  [disableDefaultUI]="false" [styles]="mapStyles" [usePanning] = 'false'>
                        <agm-marker *ngIf="userLocation.latitude" [latitude]="userLocation.latitude" [longitude]="userLocation.longitude" [iconUrl]="userLocation.iconUrl" [optimized]="false" (mouseOver)="markerEntered(userLocation, $event, false)" (mouseOut)="markerOut(userLocation, $event, false)">

                        </agm-marker>

                        <agm-marker *ngFor="let m of locations" [latitude]="m.lat" [longitude]="m.lng" [iconUrl]="m.iconUrl" [optimized]="false" (mouseOver)="markerEntered(m, $event, true)" (mouseOut)="markerOut(m, $event, true)">
                            <agm-info-window [disableAutoPan]="true" [isOpen]="m.isOpen">
                                <div [innerHtml]="m.label"></div>
                            </agm-info-window>
                        </agm-marker>

                        <agm-polyline [geodesic] = 'true' [strokeWeight]='1' *ngFor="let m of locations" [strokeColor]='m.color'>
                             <agm-polyline-point [latitude]="userLocation.latitude" [longitude]="userLocation.longitude">
                             </agm-polyline-point>
                             <agm-polyline-point [latitude]="m.lat" [longitude]="m.lng">
                             </agm-polyline-point>
                        </agm-polyline>
                    </agm-map> -->

                    <!-- OSM implementation -->
                    <!-- <aol-map [height]="'300px'">
                        <aol-view [zoom]="1" [minZoom]="1">
                            <aol-coordinate [x]="5.795122" [y]="45.210225" [srid]="'EPSG:4326'"></aol-coordinate>
                        </aol-view>
                        <aol-interaction-default></aol-interaction-default>
                        <aol-layer-tile>
                            <aol-source-osm></aol-source-osm>
                        </aol-layer-tile>
                    </aol-map> -->

                    <!-- Leaflet implementation -->

                    <!-- <leaf-element [zoom]=1 [minZoom]=1>
                        <layer-element [slippyLayer]="'http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png'"></layer-element>
                        <leaflet-group [name]="'markers'">
                            <marker-element [lat]="userLocation.latitude" [lon]="userLocation.latitude" [iconUrl]="userLocation.iconUrl">
                            </marker-element>
                            <marker-element *ngFor="let m of locations" [lat]="m.lat" [lon]="m.lng" [iconUrl]="m.iconUrl" [mouseover]="markerEntered(m, false)">
                            </marker-element>
                        </leaflet-group>
                        <leaflet-group> 
                            <polyline-element *ngFor="let m of locations" [latlngs]="[[userLocation.latitude, userLocation.latitude],[m.lat, m.lng]]" [Options]="{'interactive': false, 'weight': 2, 'color': m.color}">
                            </polyline-element>
                        </leaflet-group>

   
                    </leaf-element> -->
                </div>
            </div>
        </div>
        <div class="col-md-5">
            <div class="card card-radious-none">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-9" style="padding-right: 0px;">
                        <h6 class="card-title card-title-margin">{{properties.RIGHT_PANEL_HEADER}} <span>&nbsp;  <i class="fa fa-info-circle fa-lg info-color cursor-pointer" aria-hidden="true" mdTooltip="{{properties.RIGHT_PANEL_TOOLTIP}}"></i></span></h6>                 
                        </div>
                        <div class="col-md-3" style="text-align: right;">
                            <img class="loader-style" src="../assets/loader.gif" *ngIf="disabledStart">
                        </div>
                    </div>
                </div>
                <div class="card-block test-card-height" style="overflow-y: auto; padding-top: 0px;">
                    <div class="row">
                    <div class="col-md-7" style="margin-bottom: 5px;">Best region for latency sensitive apps </div>
                    <div class="col-md-5" *ngIf="!bestLatencyRegion">NA</div>
                    <div class="col-md-5" *ngIf="bestLatencyRegion">{{bestLatencyRegion.region_name}}</div>
                    </div>
                    <div class="row">
                       <div class="col-md-7"> Best region for data intesive apps </div>
                       <div class="col-md-5" *ngIf="!bestBandwidthRegion">NA</div>
                       <div class="col-md-5" *ngIf="bestBandwidthRegion">{{bestBandwidthRegion.region_name}}</div>

                    </div>
                    <table class="table table-striped" style="margin-top: 10px;">
                        <thead>
                            <tr>
                                <th width="35%"><span class="column-header" (click)="sortBy('region_name')">{{properties.RIGHT_PANEL_REGION_COLUMN_HEADER}} <i class="fa sort-style" 
                                    [ngClass]="{'fa-sort': sortableColumn != 'region_name', 'fa-sort-asc': (sortableColumn == 'region_name' && !isDesc),                                        'fa-sort-desc': (sortableColumn == 'region_name' && isDesc) }"
                                    aria-hidden="true"> </i>

                                </span></th>

                                <th width="30%"><span class="column-header" (click)="sortBy('latency')">{{properties.RIGHT_PANEL_LATENCY_COLUMN_HEADER}} <i class="fa sort-style" 
                                    [ngClass]="{'fa-sort': sortableColumn != 'latency', 'fa-sort-asc': (sortableColumn == 'latency' && !isDesc),                                        'fa-sort-desc': (sortableColumn == 'latency' && isDesc) }"
                                    aria-hidden="true"> </i></span></th>
                                
                                <th width="35%"><span class="column-header" (click)="sortBy('bandwidth')">{{properties.RIGHT_PANEL_THROUGHPUT_COLUMN_HEADER}} <i class="fa sort-style" 
                                    [ngClass]="{'fa-sort': sortableColumn != 'bandwidth', 'fa-sort-asc': (sortableColumn == 'bandwidth' && !isDesc),                                        'fa-sort-desc': (sortableColumn == 'bandwidth' && isDesc) }"
                                    aria-hidden="true"> </i></span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let region of locations">
                                <td>{{region.region_name}}</td>
                                <td *ngIf="!region.latency && !disabledStart">NA</td>
                                <td *ngIf="!region.latency && disabledStart">{{readLatestLatency(region)}}</td>
                                <td  *ngIf="region.latency">{{region.latency}}</td>

                                <td *ngIf="!region.bandwidth && !disabledStart">NA</td>
                                <td *ngIf="region.bandwidth">{{region.bandwidth}}</td>
                                <td *ngIf="!region.bandwidth && disabledStart">{{readLatestThroughput(region)}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- <table class="table">
                      <thead>
                        <tr>
                          <th>Best Region<br> <span *ngIf="null !== bestRegion"> {{bestRegion.region_name}}</span></th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                      <tr>

                        <td>Response Time</td>
                        <td  *ngIf="null !== bestRegion">{{bestRegion.responseTime}} ms</td>
                        <td  *ngIf="null === bestRegion && disabledStart">Calculating...</td>
                        <td  *ngIf="null === bestRegion && !disabledStart">NA</td>
                      </tr>
                      <tr>
                        <td>Latency</td>
                        <td  *ngIf="null !== bestRegion">{{bestRegion.latency}} ms</td>
                        <td  *ngIf="null === bestRegion && disabledStart">Calculating...</td>
                        <td  *ngIf="null === bestRegion && !disabledStart">NA</td>
                      </tr>
                      <tr>
                        <td>Bandwidth</td>
                        <td  *ngIf="null !== bestRegion">{{bestRegion.bandwidth}} mbps</td>
                        <td  *ngIf="null === bestRegion && disabledStart">Calculating...</td>
                        <td  *ngIf="null === bestRegion && !disabledStart">NA</td>
                      </tr>
                      </tbody>
                    </table>
                    
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Worst Region<br> <span *ngIf="null !== worstRegion"> {{worstRegion.region_name}}</span></th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <td>Response Time</td>
                        <td  *ngIf="null !== worstRegion">{{worstRegion.responseTime}} ms</td>
                        <td  *ngIf="null === worstRegion && disabledStart">Calculating...</td>
                        <td  *ngIf="null === worstRegion && !disabledStart">NA</td>
                      </tr>
                      <tr>
                        <td>Latency</td>
                        <td  *ngIf="null !== worstRegion">{{worstRegion.latency}} ms</td>
                        <td  *ngIf="null === worstRegion && disabledStart">Calculating...</td>
                        <td  *ngIf="null === worstRegion && !disabledStart">NA</td>
                      </tr>
                      <tr>
                        <td>Bandwidth</td>
                        <td  *ngIf="null !== worstRegion">{{worstRegion.bandwidth}} mbps</td>
                        <td  *ngIf="null === worstRegion && disabledStart">Calculating...</td>
                        <td  *ngIf="null === worstRegion && !disabledStart">NA</td>
                      </tr>
                      </tbody>
                    </table> -->
                    <div id="imageDiv"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mrg-top-15 mrg-bottom-15">
        <div class="col-md-6 pad-right-none">
            <div class="card card-radious-none">
                <!-- <div class="card-header">
                     <div class="row">
                        <div class="col-md-6"><h5 class="card-title card-title-margin">Response Time</h5></div>
                        <div class="col-md-6"><img src="../assets/loader.gif" style="float: right; margin-top: 10px;" *ngIf="disabledStart"></div>
                    </div>
                </div>
                <div class="card-block">
                    <chart [options]="responseTimeOptions" (load)="responseTimeInstance($event.context)" *ngIf="responseTimeOptions !== null"></chart>
                    <h6 *ngIf="responseTimeOptions === null">Response time data is not available.</h6>
                </div> -->
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-9"><h6 class="card-title card-title-margin">{{properties.LATENCY_CHART_HEADER}} <span>&nbsp; <i class="fa fa-info-circle fa-lg info-color cursor-pointer" aria-hidden="true" mdTooltip="{{properties.LATENCY_CHART_TOOLTIP}}" mdTooltipPosition="right"></i></span></h6></div>
                        <div class="col-md-3" style="text-align: right;">
                            <img class="loader-style" src="../assets/loader.gif" *ngIf="disabledStart">
                        </div>

                    </div>
                </div>
                <div class="card-block" #latencyCard>
                    <chart [options]="latencyOptions" (load)="latencyInstance($event.context)"  *ngIf="latencyOptions !== null" class="chart-height" style="width: 95%"></chart>
                    <h6 *ngIf="latencyOptions === null" style="margin-top: 0px; margin-bottom: 0px; font-weight: 300">Click <a href="#" (click)="startTest();"> Start </a> to run.</h6>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card card-radious-none">
                <!-- <div class="card-header">
                    <div class="row">
                        <div class="col-md-6"><h5 class="card-title card-title-margin">Latency</h5></div>
                        <div class="col-md-6"><img src="../assets/loader.gif" style="float: right; margin-top: 10px;" *ngIf="disabledStart"></div>
                    </div>
                </div>
                <div class="card-block" #latencyCard>
                    <chart [options]="latencyOptions" (load)="latencyInstance($event.context)"  *ngIf="latencyOptions !== null"></chart>
                    <h6 *ngIf="latencyOptions === null">Latency data is not available.</h6>
                </div> -->
                 <div class="card-header">
                    <div class="row">
                        <div class="col-md-9"><h6 class="card-title card-title-margin">{{properties.THROUGHPUT_CHART_HEADER}}  <span>&nbsp; <i class="fa fa-info-circle fa-lg info-color cursor-pointer" aria-hidden="true" mdTooltip="{{properties.THROUGHPUT_PANEL_TOOLTIP}}" mdTooltipPosition="right"></i></span></h6></div>
                        <div class="col-md-3" style="text-align: right">
                            <img class="loader-style" src="../assets/loader.gif" *ngIf="disabledStart">
                        </div>
                    </div>

                </div>
                <div class="card-block">
                    <chart [options]="bandwidthOptions" (load)="bandwidthInstance($event.context)" *ngIf="bandwidthOptions !== null" class="chart-height"></chart>
                     <h6 *ngIf="bandwidthOptions === null" style="margin-top: 0px; margin-bottom: 0px; font-weight: 300">Click <a href="#" (click)="startTest();"> Start </a> to run.</h6>
                </div>
            </div>
        </div>
    </div>
    <div class="row margin-top-50 mrg-bottom-15">
      <div class="col-md-12 center">
        <h5 class="interested-text-style">{{properties.READY_TO_IMPLEMENT}}</h5><br/>
        <a class="btn btn-download" href="http://aviatrix.com/download/" target="_blank"><i class="fa fa-download" aria-hidden="true"></i>&nbsp;&nbsp;{{properties.DOWNLOAD_AVIATRIX}}</a>

      </div>
    </div>
    <!-- <div class="row mrg-top-15 mrg-bottom-15">
        <div class="col-md-12">
            <div class="card card-radious-none">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-6"><h5 class="card-title card-title-margin">Bandwidth</h5></div>
                        <div class="col-md-6"><img src="../assets/loader.gif" style="float: right; margin-top: 10px;" *ngIf="disabledStart"></div>
                    </div>

                </div>
                <div class="card-block">
                    <chart [options]="bandwidthOptions" (load)="bandwidthInstance($event.context)" *ngIf="bandwidthOptions !== null" style="width: 95%"></chart>
                     <h6 *ngIf="bandwidthOptions === null">Bandwidth data is not available.</h6>
                </div>
            </div>
        </div>
    </div> -->
</div>
